"use strict";(self.webpackChunkzhen_fe2=self.webpackChunkzhen_fe2||[]).push([[730],{2730:(e,t,r)=>{r.r(t),r.d(t,{default:()=>C});var n=r(8216),a=r(7294),l=r(2106),c=r(561),i=r(531),o=r(8293),s=r(4184),u=r.n(s),m=r(5485),f=r(4414);const d=function(e){e.data;var t=e.getdata,r=e.count,n=void 0===r?0:r,l=e.limit,c=void 0===l?10:l,i=e.page,o=void 0===i?1:i,s=e.length,d=void 0===s?10:s,p=function(e){"function"==typeof t&&t(e)},y=function(){var e=Math.ceil(n/c),t=Math.ceil(o/d),r=Math.min(t*d,e);return{start:t*d-d+1,end:r,canprev:o>1,cannext:o<e,pagecount:e}}(),b=y.start,g=y.end,h=y.canprev,x=y.cannext,v=y.pagecount,E=(o-1)*c+1,N=v===o?n:o*c;return n<=0?null:a.createElement("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6"},a.createElement("div",{className:"flex-1 flex justify-between sm:hidden"},h?a.createElement("div",{className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",onClick:function(){return p(o-1)}},"Previous"):null,x?a.createElement("div",{className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",onClick:function(){return p(o+1)}},"Next"):null),a.createElement("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},a.createElement("div",null,a.createElement("p",{className:"text-sm text-gray-700"},a.createElement("span",{className:"mr-1"},"Showing"),a.createElement("span",{className:"mr-1 font-medium"},E),a.createElement("span",{className:"mr-1"},"to"),a.createElement("span",{className:"mr-1 font-medium"},N),a.createElement("span",{className:"mr-1"},"of"," "),a.createElement("span",{className:"mr-1 font-medium"},n),a.createElement("span",{className:""},"results"))),a.createElement("div",null,a.createElement("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination"},a.createElement("div",{href:"#",className:u()("relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium",{"text-gray-500":1!==E,"hover:bg-gray-50":1!==E,"text-gray-300":1===E}),onClick:function(){1!==E&&p(o-1)}},a.createElement("span",{className:"sr-only"},"Previous"),a.createElement(m.Z,{className:"h-5 w-5","aria-hidden":"true"})),function(e,t,r){for(var n=[],l=function(e){n.push(a.createElement("div",{key:e,"aria-current":"page",className:"relative items-center px-4 py-2 border text-sm font-medium select-none ".concat(u()({"bg-white border-gray-300 text-gray-500 hover:bg-gray-50 hidden md:inline-flex cursor-pointer":e!==r,"inline-flex z-10 bg-indigo-50 border-indigo-500 text-indigo-600 cursor-default":e===r})),onClick:function(){return p(e)}},e))},c=e;c<=t;c++)l(c);return n}(b,g,o),a.createElement("div",{className:u()("relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium",{"text-gray-500":N!==n,"hover:bg-gray-50":N!==n,"text-gray-300":N===n}),onClick:function(){N!==n&&p(o+1)}},a.createElement("span",{className:"sr-only"},"Next"),a.createElement(f.Z,{className:"h-5 w-5","aria-hidden":"true"}))))))};var p=r(4406),y=r(1776),b=r(9889);function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==g(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===g(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E(e){return function(e){if(Array.isArray(e))return j(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||w(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,l,c,i=[],o=!0,s=!1;try{if(l=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;o=!1}else for(;!(o=(n=l.call(r)).done)&&(i.push(n.value),i.length!==t);o=!0);}catch(e){s=!0,a=e}finally{try{if(!o&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(s)throw a}}return i}}(e,t)||w(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){if(e){if("string"==typeof e)return j(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?j(e,t):void 0}}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const S=function(e){var t=e.match,r=e.cart,n=e.updateCart,s=e.push,u=N((0,a.useState)(1),2),m=u[0],f=u[1],g=N((0,a.useState)(12),2),h=g[0],v=(g[1],N((0,a.useState)(!1),2)),w=v[0],j=v[1],S=(0,a.useRef)(),O=new URLSearchParams(window.location.search),k={};O.forEach((function(e,t){k[t]=e}));var C=Number(t.params.cats_sid)||0,_=c.b.filter((function(e){return e.cats_sid===C})),P=N(_,1)[0],A=JSON.parse(JSON.stringify(P||{product:[]})),Z=A.product.filter((function(e){return!k.search||i[e].name.includes(k.search)}));A.product=Z;var M=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=!!r.filter((function(t){return t.cat_sid===e.cat_sid})).length,l=E(r);a?l=l.map((function(r){return r.cat_sid!==e.cat_sid?r:x(x({},r),{},{buyCount:r.buyCount+t})})):l.push(x(x({},e),{},{buyCount:t})),localStorage.setItem("cart",JSON.stringify(l)),n(l)},I=function(e){s("/shop/detail/".concat(e))};return(0,a.useEffect)((function(){S.current.scrollTo(0,0)}),[C]),(0,a.useEffect)((function(){f(1)}),[t.url]),(0,a.useEffect)((function(){(0,y.O)(!0)}),[m]),a.createElement("div",{className:"relative h-full pl-4"},a.createElement("h1",{className:"text-lg font-bold"},A.name),a.createElement("ul",{className:"pr-12 mb-12 grid grid-cols-1 gap-6 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",ref:S},A.product.length?function(e){if(!Array.isArray(e))return[];var t=(m-1)*h+1,r=m*h;return e.slice(t-1,r)}(A.product).map((function(e,t){return i[e]?a.createElement("li",{key:t,className:"col-span-1 bg-white rounded-lg divide-gray-200 cursor-pointer flex flex-col",style:{maxHeight:"400px"}},a.createElement("div",{className:"w-full flex flex-1"},a.createElement("div",{className:"text-gray-900 text-sm font-medium flex flex-col justify-between"},a.createElement("div",null,a.createElement("div",{className:"w-full flex justify-center mb-4",onClick:function(){return I(e)}},a.createElement("div",{className:"relative w-56 pt-56"},a.createElement(o.Z,{img:i[e].detail&&i[e].detail.product_img&&i[e].detail.product_img[0]}),i[e].discount&&a.createElement("span",{className:"flex-shrink-0 inline-block py-2 px-4 text-white text-sm font-medium bg-black absolute top-0 right-0"},a.createElement(l.Z,{id:"shop.discount"})))),a.createElement("h3",{className:"text-lg text-center",onClick:function(){return I(e)}},a.createElement(l.Z,{id:"shop.products.".concat(i[e].intl_id)}))),a.createElement("h3",{className:"text-center text-red-600",onClick:function(){return I(e)}},a.createElement("span",{className:"mr-4 ".concat(i[e].discount?"text-yellow-600 line-through":"")},a.createElement("span",{className:"text-xl"},"NT$"),a.createElement("span",{className:"text-xl"},(0,p.x)(i[e].price))),i[e].discount&&a.createElement("span",{className:""},a.createElement("span",{className:"text-xl"},"NT$"),a.createElement("span",{className:"text-xl"},(0,p.x)(i[e].discount)))))),a.createElement("div",{className:""},a.createElement("div",{className:"flex-auto flex space-x-3 mt-4"},a.createElement("button",{className:"w-1/2 flex items-center justify-center rounded-md bg-gray-700 hover:bg-black text-white p-2",type:"submit",onClick:function(){M(i[e]),s("/cart")}},a.createElement(l.Z,{id:"shop.buy_now",defaultMessage:"直接結帳"})),a.createElement("button",{className:"w-1/2 flex items-center justify-center rounded-md border border-gray-300 p-2 hover:bg-gray-50",type:"button",onClick:function(){M(i[e]),j(!0)}},a.createElement(l.Z,{id:"shop.add_to_bag",defaultMessage:"加入購物車"}))))):null})):a.createElement("div",{className:"mt-8 col-span-3 mx-auto"},a.createElement(l.Z,{id:"shop.item_not_found",defaultMessage:"找不到商品"}),"...")),a.createElement(d,{count:A.product.length,limit:h,page:m,length:10,getdata:function(e){f(e)}}),a.createElement(b.Z,{show:w,onHide:function(){j(!1)},size:"xs",timeout:500},a.createElement("div",{className:"flex justify-center items-center"},a.createElement(l.Z,{id:"shop.result.add_success",defaultMessage:"加入成功"}))))};var O=r(5982),k=r(2371);const C=(0,n.$j)((function(e){return{cart:e.cart}}),(function(e){return{updateCart:function(t){return e((0,k.H)(t))},push:function(t,r){return e((0,O.VF)(t,r))}}}))(S)}}]);